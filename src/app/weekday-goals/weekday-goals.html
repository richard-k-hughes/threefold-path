<div class="weekday-wrapper">
  @for (day of weekdays; let dayIdx = $index; track day) {
    <div class="day-box-full">
      <div class="day-label">
        {{ day }} <span class="date-label">{{ weekdayDates[dayIdx] | date:'MMM d' }}</span>
      </div>

      <div class="day-content">
        @for (category of goalCategories; track category) {
          <div class="goal-section">
            <label class="goal-label">
              <input
                type="checkbox"
                [checked]="goals[day][category].checked"
                (change)="onCheckboxChange(dayIdx, day, category)"
              />
              <span class="goal-title">{{ category }}</span>
            </label>
            <textarea
              #noteInput
              class="goal-input-textarea"
              rows="1"
              [value]="goals[day][category].note"
              (input)="autoGrow(noteInput); onNoteChange(dayIdx, day, category, noteInput.value)"
            ></textarea>
          </div>
        }

        <div class="day-label">Daily Subgoals</div>
        <div class="subgoal-wrapper">
          <div class="subgoal-content">
            @for (sub of subgoalCategories; track sub) {
              <div class="subgoal-item">
                <label class="subgoal-label">
                  <input
                    type="checkbox"
                    [checked]="goals[day][sub].checked"
                    (change)="onCheckboxChange(dayIdx, day, sub)"
                  />
                  <span class="subgoal-title">{{ sub }}</span>
                </label>
              </div>
            }
          </div>
        </div>

      </div>
    </div>
  }
</div>
